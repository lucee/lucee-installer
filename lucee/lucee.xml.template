<project>
    <shortName>lucee</shortName>
    <fullName>Lucee</fullName>
    <version>LUCEE_VERSION</version>
    <licenseFile>license.txt</licenseFile>
    <leftImage>lucee-side.png</leftImage>
    <logoImage>lucee-logo.png</logoImage>
    <splashImage>splash.png</splashImage>
    <componentList>
        <component>
            <name>luceecore</name>
            <description>luceecore</description>
            <canBeEdited>0</canBeEdited>
            <selected>1</selected>
            <show>0</show>
            <folderList>
                <folder>
                    <description>Program Files</description>
                    <destination>${installdir}</destination>
                    <name>programfiles</name>
                    <platforms>all</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>tomcat.ico</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>lucee.ico</origin>
                        </distributionFile>
                        <distributionDirectory>
                            <origin>tomcat9/tomcat</origin>
                        </distributionDirectory>
                        <distributionDirectory>
                            <origin>mod_cfml</origin>
                        </distributionDirectory>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>Lucee Default bundled jar</description>
                    <destination>${installdir}</destination>
                    <name>luceejar</name>
                    <platforms>all</platforms>
                    <distributionFileList>
                        <distributionDirectory>
                            <origin>lucee/lib</origin>
                        </distributionDirectory>
                    </distributionFileList>
                    <ruleList>
                        <fileExists negate="1">
                            <path>${customLuceejar}</path>
                        </fileExists>
                    </ruleList>
                </folder>
                <folder>
                    <description>Windows IIS Connector</description>
                    <destination>${installdir}</destination>
                    <name>iisconnector</name>
                    <platforms>windows-x64</platforms>
                    <distributionFileList>
                        <distributionDirectory>
                            <origin>windows/AJP13</origin>
                        </distributionDirectory>
                    </distributionFileList>
                    <ruleList>
                        <isTrue>
                            <value>${installiis}</value>
                        </isTrue>
                        <platformTest>
                            <type>windows-x64</type>
                        </platformTest>
                    </ruleList>
                </folder>
                <folder>
                    <description>Windows Java Runtime</description>
                    <destination>${installdir}</destination>
                    <name>winjre</name>
                    <platforms>windows-x64</platforms>
                    <distributionFileList>
                        <distributionDirectory>
                            <origin>../jre/jre64-win/jre</origin>
                        </distributionDirectory>
                    </distributionFileList>
                    <ruleList>
                        <isTrue>
                            <value>${installjre}</value>
                        </isTrue>
                        <platformTest>
                            <type>windows-x64</type>
                        </platformTest>
                    </ruleList>
                </folder>
                <folder>
                    <description>Linux 64 Files</description>
                    <destination>${installdir}</destination>
                    <name>linux64files</name>
                    <platforms>linux-x64</platforms>
                    <distributionFileList>
                        <distributionDirectory>
                            <origin>linux/sys</origin>
                        </distributionDirectory>
                    </distributionFileList>
                    <ruleList>
                        <platformTest>
                            <type>linux-x64</type>
                        </platformTest>
                    </ruleList>
                </folder>
                <folder>
                    <description>Linux Java Runtime</description>
                    <destination>${installdir}</destination>
                    <name>linuxjavaruntime</name>
                    <platforms>linux-x64</platforms>
                    <distributionFileList>
                        <distributionDirectory>
                            <origin>../jre/jre64-lin/jre</origin>
                        </distributionDirectory>
                    </distributionFileList>
                    <ruleList>
                        <platformTest>
                            <type>linux-x64</type>
                        </platformTest>
                        <isTrue>
                            <value>${installjre}</value>
                        </isTrue>
                    </ruleList>
                </folder>
            </folderList>
            <postInstallationActionList>
                <createDirectory>
                    <path>${installdir}/lib/</path>
                </createDirectory>
                <copyFile>
                    <destination>${installdir}/lib</destination>
                    <origin>${customLuceejar}</origin>
                    <ruleList>
                        <fileExists>
                            <path>${customLuceejar}</path>
                        </fileExists>
                    </ruleList>
                </copyFile>
                <copyFile>
                    <destination>${installdir}/tomcat/lib/</destination>
                    <origin>${installdir}/mod_cfml/mod_cfml-valve_*</origin>
                    <ruleList>
                        <isTrue>
                            <value>${installmodcfml}</value>
                        </isTrue>
                    </ruleList>
                </copyFile>
                <deleteFile>
                    <path>${installdir}/mod_cfml/</path>
                    <ruleList>
                        <isFalse>
                            <value>${installmodcfml}</value>
                        </isFalse>
                    </ruleList>
                </deleteFile>
                <dirName path="${java_executable}" variable="java_bin_dir"/>
                <dirName path="${java_bin_dir}" variable="java_home_dir"/>
                <substitute>
                    <files>${installdir}/sys/change_user.sh</files>
                    <type>exact</type>
                    <ruleList>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                    <substitutionList>
                        <substitution>
                            <pattern>@@luceeJREhome@@</pattern>
                            <value>TEMP=`echo "JRE_HOME=${installDir}/jre; export JRE_HOME" &gt;&gt; $TomcatControlScript`;</value>
                            <ruleList>
                                <isTrue value="${installjre}"/>
                            </ruleList>
                        </substitution>
                        <substitution>
                            <pattern>@@luceeJAVAhome@@</pattern>
                            <value>TEMP=`echo "JAVA_HOME=${installDir}/jre; export JAVA_HOME" &gt;&gt; $TomcatControlScript`;</value>
                            <ruleList>
                                <isTrue value="${installjre}"/>
                            </ruleList>
                        </substitution>
                        <substitution>
                            <pattern>@@luceeJREhome@@</pattern>
                            <value>TEMP=`echo "JRE_HOME=${java_home_dir}; export JRE_HOME" &gt;&gt; $TomcatControlScript`;</value>
                            <ruleList>
                                <isFalse value="${installjre}"/>
                            </ruleList>
                        </substitution>
                        <substitution>
                            <pattern>@@luceeJAVAhome@@</pattern>
                            <value>TEMP=`echo "JAVA_HOME=${java_home_dir}; export JAVA_HOME" &gt;&gt; $TomcatControlScript`;</value>
                            <ruleList>
                                <isFalse value="${installjre}"/>
                            </ruleList>
                        </substitution>
                    </substitutionList>
                </substitute>
                <runProgram>
                    <explanation>${msg(postInstall.updatingTomcatUser)}</explanation>
                    <program>${installdir}/sys/change_user.sh</program>
                    <programArguments>${systemuser} ${installdir} lucee nobackup</programArguments>
                    <progressText>${msg(postInstall.updatingTomcatUser)}</progressText>
                    <useMSDOSPath>0</useMSDOSPath>
                    <ruleList>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                </runProgram>
                <substitute>
                    <encoding>utf-8</encoding>
                    <explanation>${msg(postInstall.CreateControlScript)}</explanation>
                    <files>${installdir}/lucee_ctl</files>
                    <type>exact</type>
                    <ruleList>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                    <substitutionList>
                        <substitution>
                            <pattern>@@installdir@@</pattern>
                            <value>${installdir}</value>
                        </substitution>
                    </substitutionList>
                </substitute>
                <changePermissions>
                    <files>${installdir}/lucee_ctl</files>
                    <permissions>744</permissions>
                    <ruleList>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                </changePermissions>
                <runProgram>
                    <program>${installdir}/sys/service_config.sh</program>
                    <programArguments>-i --path=${installdir}/lucee_ctl</programArguments>
                    <ruleList>
                        <isTrue>
                            <value>${startatboot}</value>
                        </isTrue>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                </runProgram>
                <substitute>
                    <encoding>utf-8</encoding>
                    <explanation>${msg(postInstall.configuringTomcat)}</explanation>
                    <files>${installdir}\tomcat\conf\server.xml</files>
                    <progressText>${msg(postInstall.configuringTomcat)}</progressText>
                    <type>exact</type>
                    <ruleList>
                        <platformTest>
                            <type>windows</type>
                        </platformTest>
                    </ruleList>
                    <substitutionList>
                        <substitution>
                            <pattern>@@tomcatport@@</pattern>
                            <value>${tomcatport}</value>
                        </substitution>
                        <substitution>
                            <pattern>@@tomcatshutdownport@@</pattern>
                            <value>${tomcatshutdownport}</value>
                        </substitution>
                        <substitution>
                            <pattern>@@tomcatajpport@@</pattern>
                            <value>${tomcatajpport}</value>
                        </substitution>
                        <substitution>
                            <pattern>@@systempath@@</pattern>
                            <value>${installdir}/tomcat/webapps/ROOT/</value>
                        </substitution>
                        <substitution>
                            <pattern>@@secretkey@@</pattern>
                            <value>${secretkey}</value>
                        </substitution>
                        <substitution>
                            <pattern>@@ajpsecretkey@@</pattern>
                            <value>${ajpsecretkey}</value>
                        </substitution>
                        <substitution>
                            <pattern>@@installmodcfml1@@</pattern>
                            <value>&lt;!-- </value>
                            <ruleList>
                                <isFalse>
                                    <value>${installmodcfml}</value>
                                </isFalse>
                            </ruleList>
                        </substitution>
                        <substitution>
                            <pattern>@@installmodcfml2@@</pattern>
                            <value> --&gt;</value>
                            <ruleList>
                                <isFalse>
                                    <value>${installmodcfml}</value>
                                </isFalse>
                            </ruleList>
                        </substitution>
                        <substitution>
                            <pattern>@@installmodcfml1@@</pattern>
                            <value></value>
                            <ruleList>
                                <isTrue>
                                    <value>${installmodcfml}</value>
                                </isTrue>
                            </ruleList>
                        </substitution>
                        <substitution>
                            <pattern>@@installmodcfml2@@</pattern>
                            <value></value>
                            <ruleList>
                                <isTrue>
                                    <value>${installmodcfml}</value>
                                </isTrue>
                            </ruleList>
                        </substitution>
                    </substitutionList>
                </substitute>
                <substitute>
                    <encoding>utf-8</encoding>
                    <explanation>${msg(postInstall.configuringTomcat)}</explanation>
                    <files>${installdir}/tomcat/conf/server.xml</files>
                    <progressText>${msg(postInstall.configuringTomcat)}</progressText>
                    <type>exact</type>
                    <ruleList>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                    <substitutionList>
                        <substitution>
                            <pattern>@@tomcatport@@</pattern>
                            <value>${tomcatport}</value>
                        </substitution>
                        <substitution>
                            <pattern>@@tomcatshutdownport@@</pattern>
                            <value>${tomcatshutdownport}</value>
                        </substitution>
                        <substitution>
                            <pattern>@@tomcatajpport@@</pattern>
                            <value>${tomcatajpport}</value>
                        </substitution>
                        <substitution>
                            <pattern>@@systempath@@</pattern>
                            <value>${installdir}/tomcat/webapps/ROOT/</value>
                        </substitution>
                        <substitution>
                            <pattern>@@secretkey@@</pattern>
                            <value>${secretkey}</value>
                        </substitution>
                        <substitution>
                            <pattern>@@ajpsecretkey@@</pattern>
                            <value>${ajpsecretkey}</value>
                        </substitution>
                        <substitution>
                            <pattern>@@installmodcfml1@@</pattern>
                            <value>&lt;!-- </value>
                            <ruleList>
                                <isFalse>
                                    <value>${installmodcfml}</value>
                                </isFalse>
                            </ruleList>
                        </substitution>
                        <substitution>
                            <pattern>@@installmodcfml2@@</pattern>
                            <value> --&gt;</value>
                            <ruleList>
                                <isFalse>
                                    <value>${installmodcfml}</value>
                                </isFalse>
                            </ruleList>
                        </substitution>
                        <substitution>
                            <pattern>@@installmodcfml1@@</pattern>
                            <value></value>
                            <ruleList>
                                <isTrue>
                                    <value>${installmodcfml}</value>
                                </isTrue>
                            </ruleList>
                        </substitution>
                        <substitution>
                            <pattern>@@installmodcfml2@@</pattern>
                            <value></value>
                            <ruleList>
                                <isTrue>
                                    <value>${installmodcfml}</value>
                                </isTrue>
                            </ruleList>
                        </substitution>
                    </substitutionList>
                </substitute>
                <substitute>
                    <files>${installdir}/tomcat/bin/setenv.sh</files>
                    <type>exact</type>
                    <ruleList>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                    <substitutionList>
                        <substitution>
                            <pattern>@@minheap@@</pattern>
                            <value>${minheap}</value>
                        </substitution>
                        <substitution>
                            <pattern>@@maxheap@@</pattern>
                            <value>${maxheap}</value>
                        </substitution>
                    </substitutionList>
                </substitute>
                <actionGroup>
                    <explanation>${msg(postInstall.configuringLuceeTomcat)}</explanation>
                    <progressText>${msg(postInstall.configuringLuceeTomcat)} as ${servicename}</progressText>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <actionList>
                        <dirName path="${java_executable}" variable="java_bin_dir"/>
                        <dirName path="${java_bin_dir}" variable="java_home_dir"/>
                        <substitute>
                            <encoding>utf-8</encoding>
                            <files>${installdir}\tomcat\bin\service.bat</files>
                            <type>exact</type>
                            <substitutionList>
                                <substitution>
                                    <pattern>@@luceeJREhome@@</pattern>
                                    <value>set "JRE_HOME=${installdir}\jre"</value>
                                    <ruleList>
                                        <isTrue value="${installjre}"/>
                                    </ruleList>
                                </substitution>
                                <substitution>
                                    <pattern>@@luceeJREhome@@</pattern>
                                    <value>set "JRE_HOME=${java_home_dir}"</value>
                                    <ruleList>
                                        <isFalse value="${installjre}"/>
                                    </ruleList>
                                </substitution>
                                <substitution>
                                    <pattern>@@startatboot@@</pattern>
                                    <value>manual</value>
                                    <ruleList>
                                        <isFalse>
                                            <value>${startatboot}</value>
                                        </isFalse>
                                    </ruleList>
                                </substitution>
                                <substitution>
                                    <pattern>@@startatboot@@</pattern>
                                    <value>auto</value>
                                    <ruleList>
                                        <isTrue>
                                            <value>${startatboot}</value>
                                        </isTrue>
                                    </ruleList>
                                </substitution>
                                <substitution>
                                    <pattern>@@minheap@@</pattern>
                                    <value>${minheap}</value>
                                </substitution>
                                <substitution>
                                    <pattern>@@maxheap@@</pattern>
                                    <value>${maxheap}</value>
                                </substitution>
                            </substitutionList>
                        </substitute>
                        <actionGroup>
                            <actionList>
                                <copyFile>
                                    <destination>${installdir}/tomcat/bin/Luceew.exe</destination>
                                    <matchHiddenFiles>1</matchHiddenFiles>
                                    <origin>${installdir}/tomcat/bin/tomcat9w.exe</origin>
                                </copyFile>
                            </actionList>
                            <ruleList>
                                <platformTest>
                                    <type>windows</type>
                                </platformTest>
                            </ruleList>
                        </actionGroup>
                        <runProgram>
                            <abortOnError>0</abortOnError>
                            <program>${installdir}\tomcat\bin\service.bat</program>
                            <programArguments>install ${servicename}</programArguments>
                            <runAs>Administrator</runAs>
                            <onErrorActionList>
                                <showInfo>
                                    <text>The Lucee-Tomcat service intall failed to complete successfully.

${program_stdout}
${program_stderr}
${program_exit_code}

Please review the ${installer_installation_log} file for details.</text>
                                </showInfo>
                            </onErrorActionList>
                        </runProgram>
                        <runProgram>
                            <abortOnError>0</abortOnError>
                            <program>${installdir}\tomcat\bin\autostart.bat</program>
                            <programArguments></programArguments>
                            <runAs>Administrator</runAs>
                            <show>0</show>
                            <onErrorActionList>
                                <showInfo>
                                    <text>Autostart Tomcat/Lucee service failed.

${program_stdout}
${program_stderr}
${program_exit_code}

Please review ${installer_installation_log}.</text>
                                </showInfo>
                            </onErrorActionList>
                            <ruleList>
                                <isTrue>
                                    <value>${startatboot}</value>
                                </isTrue>
                                <compareValues>
                                    <logic>equals</logic>
                                    <value1>1</value1>
                                    <value2>2</value2>
                                </compareValues>
                            </ruleList>
                        </runProgram>
                        <substitute>
                            <files>${installdir}\AJP13\installer.settings</files>
                            <type>exact</type>
                            <substitutionList>
                                <substitution>
                                    <pattern>@@uninstallDir@@</pattern>
                                    <value>${installdir}\AJP13\</value>
                                </substitution>
                                <substitution>
                                    <pattern>@@secretkey@@</pattern>
                                    <value>${secretkey}</value>
                                </substitution>
                                <substitution>
                                    <pattern>@@ajpsecretkey@@</pattern>
                                    <value>${ajpsecretkey}</value>
                                </substitution>
                                <substitution>
                                    <pattern>@@installmodcfml@@</pattern>
                                    <value>1</value>
                                    <ruleList>
                                        <isTrue>
                                            <value>${installmodcfml}</value>
                                        </isTrue>
                                    </ruleList>
                                </substitution>
                                <substitution>
                                    <pattern>@@installmodcfml@@</pattern>
                                    <value>0</value>
                                    <ruleList>
                                        <isFalse>
                                            <value>${installmodcfml}</value>
                                        </isFalse>
                                    </ruleList>
                                </substitution>
                            </substitutionList>
                        </substitute>
                        <runProgram>
                            <program>${installdir}\AJP13\Connector_Setup.exe</program>
                            <programArguments>/VERYSILENT /SUPPRESSMSGBOXES /LOG /SP- /NOCANCEL /NORESTART</programArguments>
                            <progressText>${msg(postInstall.installingBonCodeConnector)}</progressText>
                            <ruleList>
                                <isTrue>
                                    <value>${installiis}</value>
                                </isTrue>
                            </ruleList>
                        </runProgram>
                        <copyFile>
                            <destination>${env(SYSTEMDRIVE)}\inetpub\wwwroot\index.cfm</destination>
                            <origin>${installdir}\tomcat\webapps\ROOT\index.cfm</origin>
                            <ruleList>
                                <fileExists>
                                    <path>${env(SYSTEMDRIVE)}\inetpub\wwwroot\.</path>
                                </fileExists>
                                <fileExists>
                                    <negate>1</negate>
                                    <path>${env(SYSTEMDRIVE)}\inetpub\wwwroot\index.cfm</path>
                                </fileExists>
                            </ruleList>
                        </copyFile>
                    </actionList>
                    <ruleList>
                        <platformTest>
                            <type>windows</type>
                        </platformTest>
                    </ruleList>
                </actionGroup>
                <actionGroup>
                    <explanation>${msg(postInstall.startingLucee)}</explanation>
                    <progressText>${msg(postInstall.startingLucee)}</progressText>
                    <actionList>
                        <runProgram>
                            <program>${installdir}/lucee_ctl</program>
                            <programArguments>start</programArguments>
                            <show>0</show>
                            <useMSDOSPath>0</useMSDOSPath>
                        </runProgram>
                    </actionList>
                    <ruleList>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                </actionGroup>
                <startWindowsService>
                    <delay>15000</delay>
                    <displayName></displayName>
                    <explanation>${msg(postInstall.startingLucee)}</explanation>
                    <progressText>${msg(postInstall.startingLucee)}</progressText>
                    <serviceName>${servicename}</serviceName>
                </startWindowsService>
                <setInstallerVariable>
                    <name>elapsedTime</name>
                    <value>0</value>
                </setInstallerVariable>
                <while>
                    <actionList>
                        <break>
                            <ruleList>
                                <portTest>
                                    <condition>cannot_bind</condition>
                                    <port>${tomcatport}</port>
                                </portTest>
                            </ruleList>
                        </break>
                        <logMessage>
                            <text>ElapsedTime: ${elapsedTime}</text>
                        </logMessage>
                        <wait>
                            <ms>1000</ms>
                        </wait>
                        <mathExpression>
                            <text>${elapsedTime}+1000</text>
                            <variable>elapsedTime</variable>
                        </mathExpression>
                        <break>
                            <ruleList>
                                <compareValues>
                                    <logic>greater_or_equal</logic>
                                    <value1>${elapsedTime}</value1>
                                    <value2>30000</value2>
                                </compareValues>
                            </ruleList>
                        </break>
                    </actionList>
                </while>
                <showWarning>
                    <text>${msg(warnings.tomcatStartTimeout)}</text>
                    <ruleList>
                        <compareValues>
                            <logic>equals</logic>
                            <value1>${elapsedTime}</value1>
                            <value2>30000</value2>
                        </compareValues>
                        <portTest>
                            <condition>can_bind</condition>
                            <port>${tomcatport}</port>
                        </portTest>
                    </ruleList>
                </showWarning>
                <httpPost>
                    <filename>${installdir}/tomcat/logs/server_post_result.txt</filename>
                    <url>http://127.0.0.1:${tomcatport}/lucee/admin/server.cfm</url>
                    <onErrorActionList>
                        <logMessage>
                            <text>${msg(warnings.setLuceeServerPass)}</text>
                        </logMessage>
                    </onErrorActionList>
                    <queryParameterList>
                        <queryParameter>
                            <name>new_password</name>
                            <value>${luceepass}</value>
                        </queryParameter>
                        <queryParameter>
                            <name>new_password_re</name>
                            <value>${luceepass}</value>
                        </queryParameter>
                    </queryParameterList>
                    <ruleList>
                        <portTest>
                            <condition>cannot_bind</condition>
                            <port>${tomcatport}</port>
                        </portTest>
                    </ruleList>
                </httpPost>
                <httpPost>
                    <filename>${installdir}/tomcat/logs/web_post_result.txt</filename>
                    <url>http://127.0.0.1:${tomcatport}/lucee/admin/web.cfm</url>
                    <onErrorActionList>
                        <logMessage>
                            <text>${msg(warnings.setLuceeWebPass)}</text>
                        </logMessage>
                    </onErrorActionList>
                    <queryParameterList>
                        <queryParameter>
                            <name>new_password</name>
                            <value>${luceepass}</value>
                        </queryParameter>
                        <queryParameter>
                            <name>new_password_re</name>
                            <value>${luceepass}</value>
                        </queryParameter>
                    </queryParameterList>
                    <ruleList>
                        <portTest>
                            <condition>cannot_bind</condition>
                            <port>${tomcatport}</port>
                        </portTest>
                    </ruleList>
                </httpPost>
                <actionGroup>
                    <progressText>${msg(postInstall.configuringApache)}</progressText>
                    <actionList>
                        <runProgram>
                            <program>${installdir}/sys/install_mod_proxy.sh</program>
                            <programArguments>-m install -t ${tomcatport} -f ${apacheconfigloc} -c ${apachecontrolloc}</programArguments>
                        </runProgram>
                        <runProgram>
                            <program>${installdir}/sys/install_mod_cfml.sh</program>
                            <programArguments>-m install -f ${apacheconfigloc} -d ${apachemodulesloc} -c ${apachecontrolloc} -k ${secretkey}</programArguments>
                            <ruleList>
                                <isTrue>
                                    <value>${installmodcfml}</value>
                                </isTrue>
                            </ruleList>
                        </runProgram>
                    </actionList>
                    <ruleList>
                        <isTrue>
                            <value>${installconn}</value>
                        </isTrue>
                    </ruleList>
                </actionGroup>
                <actionGroup>
                    <customErrorMessage>${msg(warnings.LuceePostError)}</customErrorMessage>
                    <progressText>Securing Lucee Web Admins</progressText>
                    <actionList>
                        <xmlFileGet>
                            <attribute>hspw</attribute>
                            <element>/cfLuceeConfiguration</element>
                            <file>${installdir}/tomcat/lucee-server/context/lucee-server.xml</file>
                            <variable>hspw</variable>
                            <ruleList>
                                <!-- lucee 6 uses json rather than xml -->

                                <fileExists>
                                    <path>${installdir}/tomcat/lucee-server/context/lucee-server.xml</path>
                                </fileExists>
                            </ruleList>
                        </xmlFileGet>
                        <xmlFileSet>
                            <attribute>default-hspw</attribute>
                            <element>/cfLuceeConfiguration</element>
                            <file>${installdir}/tomcat/lucee-server/context/lucee-server.xml</file>
                            <value>${hspw}</value>
                            <ruleList>
                                <!-- lucee 6 uses json rather than xml -->

                                <fileExists>
                                    <path>${installdir}/tomcat/lucee-server/context/lucee-server.xml</path>
                                </fileExists>
                                <compareValues>
                                    <logic>does_not_equal</logic>
                                    <value1>${hspw}</value1>
                                    <value2></value2>
                                </compareValues>
                                <portTest>
                                    <condition>can_bind</condition>
                                    <port>${tomcatport}</port>
                                </portTest>
                            </ruleList>
                        </xmlFileSet>

                        <!-- lucee 6 uses json rather than xml, install builder doesn't support json, so lets drop a password.txt -->

                        <writeFile>
                            <path>${installdir}/tomcat/lucee-server/context/password.txt</path>
                            <text>${luceepass}</text>
                            <ruleList>
                                <fileExists negate="1">
                                    <!-- other approach, check for .CFConfig.json -->

                                    <path>${installdir}/tomcat/lucee-server/context/lucee-server.xml</path>
                                </fileExists>
                            </ruleList>
                        </writeFile>
                    </actionList>
                </actionGroup>
            </postInstallationActionList>
            <startMenuShortcutList>
                <startMenuShortcut>
                    <comment>${msg(shortCuts.LuceeComment)}</comment>
                    <name>${msg(shortCuts.LuceeName)}</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${installdir}\tomcat\bin\luceew.exe</windowsExec>
                    <windowsExecArgs>//ES//${servicename}</windowsExecArgs>
                    <windowsIcon>${installdir}\lucee.ico</windowsIcon>
                    <windowsPath>${installdir}</windowsPath>
                </startMenuShortcut>
                <startMenuShortcut>
                    <comment>${msg(shortCuts.RemoveLuceeComment)}</comment>
                    <name>${msg(shortCuts.RemoveLuceeName)}</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${installdir}\uninstall.exe</windowsExec>
                    <windowsExecArgs></windowsExecArgs>
                    <windowsIcon>${installdir}\lucee.ico</windowsIcon>
                    <windowsPath>${installdir}</windowsPath>
                </startMenuShortcut>
                <startMenuLinkShortcut>
                    <comment>${msg(shortCuts.LaunchLuceeAdminComment)}</comment>
                    <name>${msg(shortCuts.LaunchLuceeAdminName)}</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <url>http://127.0.0.1:${tomcatport}/lucee/admin/server.cfm</url>
                    <windowsIcon>${installdir}\lucee.ico</windowsIcon>
                </startMenuLinkShortcut>
                <startMenuShortcut>
                    <comment>${msg(shortCuts.TomcatMonitorComment)}</comment>
                    <name>${msg(shortCuts.TomcatMonitorName)}</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${installdir}\tomcat\bin\luceew.exe</windowsExec>
                    <windowsExecArgs>//MS//${servicename}</windowsExecArgs>
                    <windowsIcon>${installdir}\lucee.ico</windowsIcon>
                    <windowsPath>${installdir}</windowsPath>
                </startMenuShortcut>
                <startMenuShortcut>
                    <comment>${msg(shortCuts.TomcatHostEntryComment)}</comment>
                    <name>${msg(shortCuts.TomcatHostEntryName)}</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>notepad</windowsExec>
                    <windowsExecArgs>${installdir}\tomcat\conf\server.xml</windowsExecArgs>
                    <windowsIcon>${installdir}\tomcat.ico</windowsIcon>
                    <windowsPath>${installdir}</windowsPath>
                </startMenuShortcut>
            </startMenuShortcutList>
        </component>
    </componentList>
    <initializationActionList>
        <throwError>
            <text>This installer only supports 64-bit Windows or Linux Systems</text>
            <ruleList>
                <platformTest>
                    <negate>1</negate>
                    <type>linux-x64</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </throwError>
        <setInstallerVariable>
            <name>my_prefix</name>
            <persist>1</persist>
            <value>${env(systemdrive)}/lucee</value>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>my_prefix</name>
            <persist>1</persist>
            <value>/opt/lucee</value>
            <ruleList>
                <platformTest>
                    <type>linux</type>
                </platformTest>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>my_prefix</name>
            <value>/Library/Lucee</value>
            <ruleList>
                <platformTest>
                    <type>osx</type>
                </platformTest>
            </ruleList>
        </setInstallerVariable>
        <actionGroup>
            <explanation>Set Apache Variables</explanation>
            <progressText>Set Apache Variables</progressText>
            <actionList>
                <setInstallerVariable>
                    <name>apachebinaryloc</name>
                    <persist>1</persist>
                    <value>/usr/sbin/httpd</value>
                    <ruleList>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>apachecontrolloc</name>
                    <persist>1</persist>
                    <value>/usr/sbin/apachectl</value>
                    <ruleList>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>apachemodulesloc</name>
                    <persist>1</persist>
                    <value>/usr/lib/httpd/modules/</value>
                    <ruleList>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>apachemodulesloc</name>
                    <persist>1</persist>
                    <value>/usr/lib64/httpd/modules/</value>
                    <ruleList>
                        <platformTest>
                            <type>linux-x64</type>
                        </platformTest>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>apacheconfigloc</name>
                    <persist>1</persist>
                    <value>/etc/httpd/conf/httpd.conf</value>
                    <ruleList>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>apachelogloc</name>
                    <persist>1</persist>
                    <value>/var/log/httpd/</value>
                    <ruleList>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>apachecontrolloc</name>
                    <persist>1</persist>
                    <value>/usr/sbin/apachectl</value>
                    <ruleList>
                        <fileExists>
                            <path>/usr/sbin/apachectl</path>
                        </fileExists>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>apachemodulesloc</name>
                    <persist>1</persist>
                    <value>/usr/lib/apache2/modules/</value>
                    <ruleList>
                        <fileExists>
                            <path>/usr/lib/apache2/modules/</path>
                        </fileExists>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>apachemodulesloc</name>
                    <persist>1</persist>
                    <value>/usr/lib64/apache2/modules/</value>
                    <ruleList>
                        <fileExists>
                            <path>/usr/lib64/apache2/modules/</path>
                        </fileExists>
                        <platformTest>
                            <type>linux-x64</type>
                        </platformTest>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>apacheconfigloc</name>
                    <persist>1</persist>
                    <value>/etc/apache2/apache2.conf</value>
                    <ruleList>
                        <fileExists>
                            <path>/etc/apache2/apache2.conf</path>
                        </fileExists>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>apachelogloc</name>
                    <persist>1</persist>
                    <value>/var/log/apache2/</value>
                    <ruleList>
                        <fileExists>
                            <path>/var/log/apache2/</path>
                        </fileExists>
                        <platformTest>
                            <type>linux</type>
                        </platformTest>
                    </ruleList>
                </setInstallerVariable>
            </actionList>
        </actionGroup>
        <setInstallerVariable>
            <name>installconn</name>
            <persist>1</persist>
            <show>0</show>
            <value>no</value>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>installconn</name>
            <persist>1</persist>
            <show>0</show>
            <value>yes</value>
            <ruleList>
                <platformTest>
                    <type>linux</type>
                </platformTest>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>installiis</name>
            <value>false</value>
            <ruleList>
                <platformTest>
                    <negate>1</negate>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>installiis</name>
            <value>true</value>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>servicename</name>
            <value>lucee</value>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>installmodcfml</name>
            <value>true</value>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>customLuceejar</name>
            <value></value>
        </setInstallerVariable>
        <actionGroup>
            <explanation>Configure Tomcat Ports</explanation>
            <progressText>Configure Tomcat Ports</progressText>
            <actionList>
                <setInstallerVariable>
                    <name>tomcatport</name>
                    <persist>1</persist>
                    <value>8888</value>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>tomcatport</name>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <value>80</value>
                    <ruleList>
                        <platformTest>
                            <type>osx</type>
                        </platformTest>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>tomcatshutdownport</name>
                    <value>8005</value>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>tomcatajpport</name>
                    <value>8009</value>
                </setInstallerVariable>
            </actionList>
        </actionGroup>
        <actionGroup>
            <actionList>
                <registryGet>
                    <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\InetStp\</key>
                    <name>VersionString</name>
                    <variable>iis_version</variable>
                </registryGet>
                <setInstallerVariable>
                    <name>installiis</name>
                    <show>0</show>
                    <value>no</value>
                    <ruleList>
                        <compareValues>
                            <logic>equals</logic>
                            <value1>${iis_version}</value1>
                            <value2></value2>
                        </compareValues>
                    </ruleList>
                </setInstallerVariable>
            </actionList>
        </actionGroup>
        <generateRandomValue>
            <length>64</length>
            <variable>secretkey</variable>
        </generateRandomValue>
        <generateRandomValue>
            <length>64</length>
            <variable>ajpsecretkey</variable>
        </generateRandomValue>
        <setInstallerVariable>
            <name>hspw</name>
            <value></value>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>minheap</name>
            <value>256</value>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>maxheap</name>
            <value>512</value>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>installjre</name>
            <value>true</value>
        </setInstallerVariable>
        <autodetectJava>
            <abortOnError>0</abortOnError>
            <promptUser>0</promptUser>
            <selectionOrder>newest</selectionOrder>
            <showMessageOnError>0</showMessageOnError>
            <validVersionList>
                <validVersion>
                    <bitness>64</bitness>
                    <maxVersion>14</maxVersion>
                    <minVersion>1.8</minVersion>
                    <requireJDK>0</requireJDK>
                    <vendor></vendor>
                </validVersion>
            </validVersionList>
        </autodetectJava>
        <setInstallerVariable>
            <name>installjre</name>
            <value>false</value>
            <ruleList>
                <isTrue value="${java_autodetected}"/>
            </ruleList>
        </setInstallerVariable>
    </initializationActionList>
    <preUninstallationActionList>
        <runProgram>
            <program>${installdir}/lucee_ctl</program>
            <programArguments>stop</programArguments>
            <runAs>root</runAs>
            <useMSDOSPath>0</useMSDOSPath>
            <ruleList>
                <platformTest>
                    <type>linux</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <runProgram>
            <program>${installdir}/sys/service_config.sh</program>
            <programArguments>-r</programArguments>
            <ruleList>
                <platformTest>
                    <type>linux</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <stopWindowsService>
            <delay>15000</delay>
            <displayName></displayName>
            <progressText>${msg(uninstall.stopLuceeService)} - ${servicename} - ${installdir}</progressText>
            <serviceName>${servicename}</serviceName>
        </stopWindowsService>
        <runProgram>
            <abortOnError>0</abortOnError>
            <program>${installdir}\AJP13\unins000.exe</program>
            <programArguments></programArguments>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
                <fileExists>
                    <path>${installdir}\AJP13\unins000.exe</path>
                </fileExists>
            </ruleList>
        </runProgram>
        <runProgram>
            <abortOnError>0</abortOnError>
            <program>${installdir}\tomcat\bin\service.bat</program>
            <programArguments>remove ${servicename}</programArguments>
            <progressText>${msg(uninstall.removeLuceeService)} - ${servicename} - ${installdir}</progressText>
            <runAs>Administrator</runAs>
            <show>0</show>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <runProgram>
            <program>${installdir}/sys/remove_mod_proxy.sh</program>
            <programArguments>${apacheconfigloc}</programArguments>
            <runAs>root</runAs>
            <useMSDOSPath>0</useMSDOSPath>
            <ruleList>
                <platformTest>
                    <type>linux</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <runProgram>
            <program>${installdir}/sys/remove_mod_cfml.sh</program>
            <programArguments>${apacheconfigloc}</programArguments>
            <runAs>root</runAs>
            <useMSDOSPath>0</useMSDOSPath>
            <ruleList>
                <platformTest>
                    <type>linux</type>
                </platformTest>
            </ruleList>
        </runProgram>
    </preUninstallationActionList>

    <!-- <allowedLanguages>zh_CN zh_TW nl en fr de it pl  pt_BR ro es</allowedLanguages> -->

    <allowedLanguages>en</allowedLanguages>
    <compressionAlgorithm>lzma</compressionAlgorithm>
    <enableRollback>1</enableRollback>
    <enableTimestamp>1</enableTimestamp>
    <installationLogFile>${installdir}/install.log</installationLogFile>
    <productDisplayIcon>${installdir}/lucee.ico</productDisplayIcon>
    <requireInstallationByRootUser>1</requireInstallationByRootUser>
    <saveRelativePaths>1</saveRelativePaths>
    <singleInstanceCheck>1</singleInstanceCheck>
    <slideShowTiming>20</slideShowTiming>
    <startMenuGroupName>Lucee - ${servicename}</startMenuGroupName>
    <uninstallationLogFile>${system_temp_directory}/${project.shortName}-uninstall.log</uninstallationLogFile>
    <vendor>Lucee Association Switzerland</vendor>
    <windows64bitMode>1</windows64bitMode>
    <windowsExecutableIcon>lucee.ico</windowsExecutableIcon>
    <customLanguageFileList>
        <language>
            <code>zh_CN</code>
            <encoding>utf-8</encoding>
            <file>translations/messages.zh_CN.txt</file>
        </language>
        <language>
            <code>zh_TW</code>
            <encoding>utf-8</encoding>
            <file>translations/messages.zh_TW.txt</file>
        </language>
        <language>
            <code>nl</code>
            <encoding>utf-8</encoding>
            <file>translations/messages.nl.txt</file>
        </language>
        <language>
            <code>en</code>
            <encoding>utf-8</encoding>
            <file>translations/messages.en.txt</file>
        </language>
        <language>
            <code>fr</code>
            <encoding>utf-8</encoding>
            <file>translations/messages.fr.txt</file>
        </language>
        <language>
            <code>de</code>
            <encoding>utf-8</encoding>
            <file>translations/messages.de.txt</file>
        </language>
        <language>
            <code>it</code>
            <encoding>utf-8</encoding>
            <file>translations/messages.it.txt</file>
        </language>
        <language>
            <code>pl</code>
            <encoding>utf-8</encoding>
            <file>translations/messages.pl.txt</file>
        </language>
        <language>
            <code>pt_BR</code>
            <encoding>utf-8</encoding>
            <file>translations/messages.pt_BR.txt</file>
        </language>
        <language>
            <code>ro</code>
            <encoding>iso8859-2</encoding>
            <file>translations/messages.ro.txt</file>
        </language>
        <language>
            <code>es</code>
            <encoding>utf-8</encoding>
            <file>translations/messages.es.txt</file>
        </language>
    </customLanguageFileList>
    <finalPageActionList>
        <launchBrowser>
            <progressText>${msg(shortCuts.OpenLuceeURL)}</progressText>
            <url>http://127.0.0.1:${tomcatport}/index.cfm</url>
            <ruleList>
                <compareValues>
                    <logic>equals</logic>
                    <value1>${installer_ui}</value1>
                    <value2>gui</value2>
                </compareValues>
            </ruleList>
        </launchBrowser>
    </finalPageActionList>
    <parameterList>
        <choiceParameter>
            <name>installjre</name>
            <title>Java Runtime Selection</title>
            <description>Select Java</description>
            <explanation>Choose to Install the bundled JRE or use the existing Java installation

Version: ${java_version}
Path: ${java_executable}
</explanation>
            <value></value>
            <default>{installjre}</default>
            <allowEmptyValue>1</allowEmptyValue>
            <displayType>combobox</displayType>
            <ordering>default</ordering>
            <width>40</width>
            <optionList>
                <option>
                    <description>Don't install the bundled JRE</description>
                    <image></image>
                    <text>Use existing Java: ${java_version}</text>
                    <value>false</value>
                </option>
                <option>
                    <description>Install the bundled JRE</description>
                    <image></image>
                    <text>Install the bundled JRE</text>
                    <value>true</value>
                </option>
            </optionList>
            <ruleList>
                <isTrue value="${java_autodetected}"/>
            </ruleList>
        </choiceParameter>
        <labelParameter>
            <name>NoSystemJavadetected</name>
            <title>No System Java detected</title>
            <description>Lucee requires a Java runtime (versions 1.8 to 14 are supported)</description>
            <explanation>The bundled JRE will be automatically installed</explanation>
            <image></image>
            <ruleList>
                <isFalse value="${java_autodetected}"/>
            </ruleList>
        </labelParameter>
        <directoryParameter>
            <name>installdir</name>
            <description>Installer.Parameter.installdir.description</description>
            <explanation>Installer.Parameter.installdir.explanation</explanation>
            <value></value>
            <default>${my_prefix}</default>
            <allowEmptyValue>0</allowEmptyValue>
            <cliOptionName>prefix</cliOptionName>
            <mustBeWritable>1</mustBeWritable>
            <mustExist>0</mustExist>
            <width>30</width>
            <validationActionList>
                <showInfo>
                    <text>The install directory you have chosen already exists.

While upgrading previous installations of Lucee by reinstalling might work in some cases, this method of upgrading is not officially supported. Please create a backup copy of any previous Lucee installs before proceeding.</text>
                    <ruleList>
                        <fileExists>
                            <path>${installdir}</path>
                        </fileExists>
                        <fileTest>
                            <condition>is_directory</condition>
                            <path>${installdir}</path>
                        </fileTest>
                    </ruleList>
                </showInfo>
            </validationActionList>
        </directoryParameter>
        <passwordParameter>
            <name>luceepass</name>
            <title>${msg(params.LuceePassTitle)}</title>
            <description>${msg(params.LuceePassDesc)}</description>
            <explanation>${msg(params.LuceePassExplain)}</explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>0</allowEmptyValue>
            <descriptionRetype>${msg(params.LuceePassDescConfirm)}</descriptionRetype>
            <width>20</width>
            <validationActionList>
                <throwError>
                    <text>${msg(warnings.passwordLengthSix)}</text>
                    <ruleList>
                        <compareTextLength>
                            <length>6</length>
                            <logic>less</logic>
                            <text>${luceepass}</text>
                        </compareTextLength>
                    </ruleList>
                </throwError>
            </validationActionList>
        </passwordParameter>
        <parameterGroup>
            <name>memorysettings</name>
            <title>${msg(params.MemorySettingsTitle)}</title>
            <explanation>${msg(params.MemorySettingsExplanation)}</explanation>
            <value></value>
            <default></default>
            <parameterList>
                <stringParameter>
                    <name>minheap</name>
                    <description>${msg(params.MemorySettingsMinimum)}</description>
                    <explanation></explanation>
                    <value>${minheap}</value>
                    <default>${minheap}</default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>30</width>
                    <validationActionList>
                        <throwError>
                            <text>Minimum value must be numeric and greater than 16</text>
                            <ruleList>
                                <compareValues>
                                    <logic>less</logic>
                                    <value1>16</value1>
                                    <value2></value2>
                                </compareValues>
                                <stringTest>
                                    <text></text>
                                    <type>not_digit</type>
                                </stringTest>
                            </ruleList>
                        </throwError>
                    </validationActionList>
                </stringParameter>
                <stringParameter>
                    <name>maxheap</name>
                    <description>${msg(params.MemorySettingsMaximum)}</description>
                    <explanation></explanation>
                    <value>${maxheap}</value>
                    <default>${maxheap}</default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>30</width>
                    <validationActionList>
                        <throwError>
                            <text>Maximum value must be numeric and greater than 32</text>
                            <ruleList>
                                <compareValues>
                                    <logic>less</logic>
                                    <value1>32</value1>
                                    <value2></value2>
                                </compareValues>
                                <stringTest>
                                    <text></text>
                                    <type>not_digit</type>
                                </stringTest>
                            </ruleList>
                        </throwError>
                    </validationActionList>
                </stringParameter>
            </parameterList>
        </parameterGroup>
        <stringParameter>
            <name>servicename</name>
            <title>${msg(params.windowsServiceName)}</title>
            <description></description>
            <explanation>${msg(params.windowsServiceNameExplanation)}</explanation>
            <value></value>
            <default>Lucee</default>
            <allowEmptyValue>0</allowEmptyValue>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <width>30</width>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </stringParameter>
        <stringParameter>
            <name>systemuser</name>
            <title>${msg(params.TomcatSystemUserTitle)}</title>
            <description></description>
            <explanation>${msg(params.TomcatSystemUserExplanation)}</explanation>
            <value></value>
            <default>root</default>
            <allowEmptyValue>0</allowEmptyValue>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <width>30</width>
            <ruleList>
                <platformTest>
                    <type>linux</type>
                </platformTest>
            </ruleList>
        </stringParameter>
        <parameterGroup>
            <name>tomcatportnumbers</name>
            <title>${msg(params.TomcatPortsTitle)}</title>
            <explanation>${msg(params.TomcatPortsExplanation)}</explanation>
            <value></value>
            <default></default>
            <parameterList>
                <stringParameter>
                    <name>tomcatport</name>
                    <description>${msg(params.TomcatPortsWebServerPort)}:</description>
                    <explanation></explanation>
                    <value>${tomcatport}</value>
                    <default>${tomcatport}</default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <width>6</width>
                    <validationActionList>
                        <throwError>
                            <text>${msg(warnings.tomcatWebPort)}</text>
                            <ruleList>
                                <portTest>
                                    <condition>cannot_bind</condition>
                                    <port>${tomcatport}</port>
                                </portTest>
                            </ruleList>
                        </throwError>
                    </validationActionList>
                </stringParameter>
                <stringParameter>
                    <name>tomcatshutdownport</name>
                    <description>${msg(params.TomcatPortsShutdownPort)}:</description>
                    <explanation></explanation>
                    <value>${tomcatshutdownport}</value>
                    <default>${tomcatshutdownport}</default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>6</width>
                    <validationActionList>
                        <throwError>
                            <text>${msg(warnings.tomcatShutdownPort)}</text>
                            <ruleList>
                                <portTest>
                                    <condition>cannot_bind</condition>
                                    <port>${tomcatshutdownport}</port>
                                </portTest>
                            </ruleList>
                        </throwError>
                    </validationActionList>
                </stringParameter>
                <stringParameter>
                    <name>tomcatajpport</name>
                    <description>${msg(params.TomcatPortsAJPPort)}:</description>
                    <explanation></explanation>
                    <value>${tomcatajpport}</value>
                    <default>${tomcatajpport}</default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>6</width>
                    <validationActionList>
                        <throwError>
                            <text>${msg(warnings.tomcatAJPPort)}</text>
                            <ruleList>
                                <portTest>
                                    <condition>cannot_bind</condition>
                                    <port>${tomcatajpport}</port>
                                </portTest>
                            </ruleList>
                        </throwError>
                    </validationActionList>
                </stringParameter>
            </parameterList>
        </parameterGroup>
        <booleanParameter>
            <name>startatboot</name>
            <title>${msg(params.StartAtBootTitle)}</title>
            <description>${msg(params.StartAtBootDesc)}</description>
            <explanation>${msg(params.StartAtBootExplanation)}</explanation>
            <value></value>
            <default>yes</default>
            <displayStyle>checkbox-left</displayStyle>
        </booleanParameter>
        <booleanParameter>
            <name>installiis</name>
            <title>${msg(params.installIISConnectorTitle)}</title>
            <description>${msg(params.installIISConnectorDesc)}</description>
            <explanation>${msg(params.installIISConnectorExplanation)}</explanation>
            <value>yes</value>
            <default>${installiis}</default>
            <displayStyle>checkbox-left</displayStyle>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <preShowPageActionList>
                <setInstallerVariable>
                    <name>installiis</name>
                    <persist>1</persist>
                    <value>yes</value>
                    <ruleList>
                        <platformTest>
                            <type>windows</type>
                        </platformTest>
                        <compareValues>
                            <logic>does_not_equal</logic>
                            <value1>${iis_version}</value1>
                            <value2></value2>
                        </compareValues>
                    </ruleList>
                </setInstallerVariable>
            </preShowPageActionList>
            <ruleList>
                <ruleGroup>
                    <ruleList>
                        <platformTest>
                            <type>windows</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-xp</type>
                        </platformTest>
                    </ruleList>
                </ruleGroup>
            </ruleList>
        </booleanParameter>
        <booleanParameter>
            <name>installconn</name>
            <title>${msg(params.installApacheTitle)}</title>
            <description>${msg(params.installApacheDesc)}</description>
            <explanation>${msg(params.installApacheExplanation)}</explanation>
            <value></value>
            <default>true</default>
            <displayStyle>checkbox-left</displayStyle>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <ruleList>
                <isTrue>
                    <value>${installconn}</value>
                </isTrue>
                <platformTest>
                    <type>linux</type>
                </platformTest>
            </ruleList>
        </booleanParameter>
        <booleanParameter>
            <name>installmodcfml</name>
            <title>Install modcfml?</title>
            <description>Yes, Install mod_cfml</description>
            <explanation>The mod_cfml adaptor helps make system administration easier by automatically creating new hosts in Tomcat whenever you add a new host to your web server. To learn more about mod_cfml, visit its website at modcfml.org. This option is recommended for most environments.</explanation>
            <value>yes</value>
            <default>true</default>
            <displayStyle>checkbox-left</displayStyle>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <ruleList>
                <isTrue>
                    <value>${installconn}</value>
                </isTrue>
                <isTrue>
                    <value>${installiis}</value>
                </isTrue>
            </ruleList>
        </booleanParameter>
        <fileParameter>
            <name>customLuceejar</name>
            <title>${msg(params.customLuceeVersionTitle)}</title>
            <description>${msg(params.customLuceeVersionDesc)}</description>
            <explanation>${msg(params.customLuceeVersionExplanation)}</explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <mustBeWritable>0</mustBeWritable>
            <mustExist>1</mustExist>
            <width>50</width>
            <validationActionList>
                <throwError text="The selected file isn't a .jar file">
                    <ruleList>
                        <compareText text="${customLuceejar}" logic="contains" value=".jar" negate="1"/>
                        <compareText text="${customLuceejar}" logic="equals" value="" negate="1"/>
                    </ruleList>
                </throwError>
            </validationActionList>
        </fileParameter>
        <fileParameter>
            <name>apachecontrolloc</name>
            <title>${msg(params.ApacheControlFileTitle)}</title>
            <description>${msg(params.ApacheControlFileDesc)}</description>
            <explanation>${msg(params.ApacheControlFileExplanation)}</explanation>
            <value></value>
            <default>${apachecontrolloc}</default>
            <allowEmptyValue>0</allowEmptyValue>
            <mustBeWritable>0</mustBeWritable>
            <mustExist>1</mustExist>
            <width>30</width>
            <ruleList>
                <isTrue>
                    <value>${installconn}</value>
                </isTrue>
                <platformTest>
                    <type>linux</type>
                </platformTest>
            </ruleList>
        </fileParameter>
        <directoryParameter>
            <name>apachemodulesloc</name>
            <title>${msg(params.ApacheModulesTitle)}</title>
            <description>${msg(params.ApacheModulesDesc)}</description>
            <explanation>${msg(params.ApacheModulesExplanation)}</explanation>
            <value></value>
            <default>${apachemodulesloc}</default>
            <allowEmptyValue>0</allowEmptyValue>
            <mustBeWritable>1</mustBeWritable>
            <mustExist>1</mustExist>
            <width>30</width>
            <ruleList>
                <isTrue>
                    <value>${installconn}</value>
                </isTrue>
                <platformTest>
                    <type>linux</type>
                </platformTest>
            </ruleList>
        </directoryParameter>
        <fileParameter>
            <name>apacheconfigloc</name>
            <title>${msg(params.ApacheConfigFileTitle)}</title>
            <description>${msg(params.ApacheConfigFileDesc)}</description>
            <explanation>${msg(params.ApacheConfigFileExplanation)}</explanation>
            <value>${apacheconfigloc}</value>
            <default></default>
            <allowEmptyValue>0</allowEmptyValue>
            <mustBeWritable>1</mustBeWritable>
            <mustExist>1</mustExist>
            <width>30</width>
            <ruleList>
                <isTrue>
                    <value>${installconn}</value>
                </isTrue>
                <platformTest>
                    <type>linux</type>
                </platformTest>
            </ruleList>
        </fileParameter>
        <directoryParameter>
            <name>apachelogloc</name>
            <title>${msg(params.ApacheLogDirTitle)}</title>
            <description>${msg(params.ApacheLogDirDesc)}</description>
            <explanation>${msg(params.ApacheLogDirExplanation)}</explanation>
            <value></value>
            <default>${apachelogloc}</default>
            <allowEmptyValue>0</allowEmptyValue>
            <mustBeWritable>1</mustBeWritable>
            <mustExist>1</mustExist>
            <width>30</width>
            <ruleList>
                <isTrue>
                    <value>${installconn}</value>
                </isTrue>
                <platformTest>
                    <type>linux</type>
                </platformTest>
            </ruleList>
        </directoryParameter>
        <choiceParameter>
            <name>bittype</name>
            <title>${msg(params.bitTypeTitle)}</title>
            <description>${msg(params.bitTypeDesc)}</description>
            <explanation>${msg(params.bitTypeExplanation)}</explanation>
            <value>${bittype}</value>
            <default>${bittype}</default>
            <allowEmptyValue>0</allowEmptyValue>
            <displayType>combobox</displayType>
            <insertAfter>apachever</insertAfter>
            <ordering>default</ordering>
            <width>30</width>
            <optionList>
                <option>
                    <description>32-bit</description>
                    <image></image>
                    <text>32-bit</text>
                    <value>32</value>
                </option>
                <option>
                    <description>64-bit</description>
                    <image></image>
                    <text>64-bit</text>
                    <value>64</value>
                </option>
            </optionList>
            <ruleList>
                <compareValues>
                    <logic>equals</logic>
                    <value1>1</value1>
                    <value2>2</value2>
                </compareValues>
                <ruleGroup>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <ruleList>
                        <platformTest>
                            <type>windows-x64</type>
                        </platformTest>
                        <platformTest>
                            <type>linux-x64</type>
                        </platformTest>
                    </ruleList>
                </ruleGroup>
            </ruleList>
        </choiceParameter>
    </parameterList>
    <platformOptionsList>
        <platformOptions>
            <platform>linux</platform>
        </platformOptions>
        <platformOptions>
            <platform>linux-x64</platform>
        </platformOptions>
    </platformOptionsList>
</project>
